<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Rewriting Angular 10 Directly with Version 18</title></head><body><article class="page serif"><header><h1 class="page-title"><strong>Rewriting Angular 10 Directly with Version 18</strong></h1><p class="page-description"></p><table class="properties"><tbody><tr class="property-row property-row-created_by"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesCreatedBy"><path d="M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 10.4229C6.05176 10.4229 4.54785 11.1133 3.83008 11.9131C2.90039 10.9082 2.33301 9.55469 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 9.55469 13.1064 10.9082 12.1699 11.9131C11.4521 11.1133 9.94824 10.4229 8 10.4229ZM8 9.30176C9.32617 9.30859 10.3516 8.18066 10.3516 6.71094C10.3516 5.33008 9.31934 4.18164 8 4.18164C6.6875 4.18164 5.6416 5.33008 5.64844 6.71094C5.65527 8.18066 6.68066 9.28809 8 9.30176Z"></path></svg></span>Created by</th><td><span class="user"><img src="Rewriting%20Angular%2010%20Directly%20with%20Version%2018%20379aedcb1c154b88b72f37f7c4839307/IMG_2295.jpg" class="icon user-icon"/>JiaLin Huang</span></td></tr><tr class="property-row property-row-last_edited_time"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesCreatedAt"><path d="M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.54102 8.91211H7.99316C8.30078 8.91211 8.54004 8.67285 8.54004 8.37207V3.8877C8.54004 3.58691 8.30078 3.34766 7.99316 3.34766C7.69238 3.34766 7.45312 3.58691 7.45312 3.8877V7.83203H4.54102C4.2334 7.83203 4.00098 8.06445 4.00098 8.37207C4.00098 8.67285 4.2334 8.91211 4.54102 8.91211Z"></path></svg></span>Last edited</th><td><time>@2024Âπ¥9Êúà29Êó• 20:34</time></td></tr><tr class="property-row property-row-multi_select"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>Tags</th><td><span class="selected-value select-value-color-yellow">Angular</span><span class="selected-value select-value-color-default">Post</span><span class="selected-value select-value-color-red">firebase</span></td></tr></tbody></table></header><div class="page-body"><h1 class="">Upgrade from Angular 10 to 18</h1><p class=""><strong>I don‚Äôt upgrade, I rewrite actually. üòÆ‚Äçüí®</strong></p><p class="">I recently realized it had been ages since I last played with Angular. Feeling a bit rusty, I decided to use my free time for a try - upgrading my old project from Angular 10 straight to 18. Looking at that massive official upgrade checklist, I was like... nah, let&#x27;s just rewrite the whole thing, haha.</p><p class=""><a href="https://angular.dev/update-guide?v=10.2-18.0&amp;l=1">https://angular.dev/update-guide?v=10.2-18.0&amp;l=1</a></p><p class="">
</p><h1 class="">Firebase Got a Makeover Too</h1><p class="">First up, Firebase integration got super seamless:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-Bash">ng add @angular/fire</code></pre><p class="">This command&#x27;s now like a thoughtful nanny, asking what features you want during installation and automatically registering everything in <code>app.config.ts</code>. </p><p class="">And those pesky <code>AngularXXX</code> prefixes are gone, leaving us with clean <code>XXX</code> APIs.</p><p class="">
</p><p class="">
</p><p class="">
</p><h1 class="">Saying Goodbye to <code>app.module.ts</code></h1><h3 class=""><strong>The Old Way</strong></h3><p class="">Remember when we used to have that one big file, <code>app.module.ts</code>, where we&#x27;d throw in everything and the kitchen sink? It was like the Grand Central Station of our app. We&#x27;d import all our modules there, declare our components, and set up our bootstrap. Then <code>main.ts</code> would kick off the whole show.</p><p class="">It went something like this: <strong>main.ts ‚Üí app.module.ts ‚Üí app.component.ts</strong></p><h3 class="">The New Hotness</h3><p class="">Now, Angular 17+ has flipped the script. We&#x27;ve got this new player called <code>app.config.ts</code>. Think of it as the app&#x27;s command center, focusing on the big picture stuff and major service setups. It&#x27;s not about listing every little detail anymore - it&#x27;s all about managing the important, app-wide configurations.</p><p class="">The flow&#x27;s gotten a lot simpler too: <strong>main.ts ‚Üí app.component.ts</strong></p><p class=""><strong>Seems like vue?</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-JavaScript">const app = createApp(App).use(something)</code></pre><p class="">And <code>app.config.ts</code>? It&#x27;s doing its own thing on the side, handling those crucial app-wide setups without getting in the way of your components.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-JavaScript">// app.config.ts
import { ApplicationConfig } from &#x27;@angular/core&#x27;;
import { provideRouter } from &#x27;@angular/router&#x27;;
import { provideHttpClient } from &#x27;@angular/common/http&#x27;;
import { provideFirestore, getFirestore } from &#x27;@angular/fire/firestore&#x27;;

import { routes } from &#x27;./app.routes&#x27;;

export const appConfig: ApplicationConfig = {
  providers: [
    provideRouter(routes),
    provideHttpClient(),
    provideFirestore(() =&gt; getFirestore())
  ]
};</code></pre><h3 class="">Introducing Standalone Components</h3><p class="">The new standalone component design is pretty neat. Here&#x27;s the deal:<br/><br/><mark class="highlight-red"><strong>Components are now self-sufficient units.</strong></mark> They bring along their own dependencies. </p><p class="">This design creates clearer boundaries between different parts of your app.</p><p class="">In the old days, you could dump all your imports into the NgModule, and even with lazy loading, you&#x27;d end up dragging the whole NgModule baggage along for the ride. It was like packing your entire wardrobe for a weekend trip.</p><p class="">But with the new standalone design, lazy loading got a lot smarter. Now, it only grabs the components it actually needs. Need something? Just import it right there in the component. No more relying on that one overstuffed suitcase (NgModule) for everything.</p><p class=""><mark class="highlight-red"><strong>This change makes our apps more modular</strong></mark>, easier to understand, and way more efficient when it comes to loading. It&#x27;s like we&#x27;ve gone from a tangled web of dependencies to a neat, organized collection of independent modules.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-TypeScript">@Component({
  selector: &#x27;app-child&#x27;,
  standalone: true,
  imports: [FirestoreModule, CommonModule, FormsModule, MaterialModule],
  templateUrl: &#x27;./child.component.html&#x27;,
  styleUrls: [&#x27;./child.component.scss&#x27;],
  animations: [listAnimation],
})</code></pre><p class="">
</p><p class=""><strong>The Old vs. The New: A Quick Comparison</strong></p><table class="simple-table"><tbody><tr><td class="" style="width:99.99478149414062px"><strong>Feature</strong></td><td class="" style="width:251px"><strong>old NgModule imports</strong></td><td class="" style="width:235.99868774414062px"><strong>new </strong><code><strong>app.config.ts</strong></code></td></tr><tr><td class="" style="width:99.99478149414062px">Router</td><td class="" style="width:251px"><code>RouterModule.forRoot(routes)</code></td><td class="" style="width:235.99868774414062px"><code>provideRouter(routes)</code></td></tr><tr><td class="" style="width:99.99478149414062px">HTTP</td><td class="" style="width:251px"><code>HttpClientModule</code></td><td class="" style="width:235.99868774414062px"><code>provideHttpClient()</code></td></tr><tr><td class="" style="width:99.99478149414062px">Forms</td><td class="" style="width:251px"><code>FormsModule</code></td><td class="" style="width:235.99868774414062px">in components</td></tr><tr><td class="" style="width:99.99478149414062px">Animation</td><td class="" style="width:251px"><code>BrowserAnimationsModule</code></td><td class="" style="width:235.99868774414062px"><code>provideAnimationsAsync()</code></td></tr></tbody></table><p class="">
</p><h1 class="">Dependency Injection: The Invisible Butler</h1><p class="">Services in Angular now have this cool superpower. They can show up in your components without needing a formal import statement. It&#x27;s like they have an all-access pass to your app.<br/>Here&#x27;s a quick example:<br/></p><p class="">This service can now be used anywhere in your app without explicitly importing it. It&#x27;s like having a butler who appears exactly when you need them, without you having to call.</p><p class="">And get this - you can choose how widely available you want your services to be:</p><ul class="bulleted-list"><li style="list-style-type:disc"><code>root</code>: Like a singleton, available app-wide</li></ul><ul class="bulleted-list"><li style="list-style-type:disc"><code>any</code>: New instance each time (transient)</li></ul><ul class="bulleted-list"><li style="list-style-type:disc"><code>platform</code>: Shared across multiple apps (rare, but cool)</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-JavaScript">// remote-data.service.ts
@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class RemoteDataService {
  private chunkCollection: CollectionReference&lt;any&gt;;
  constructor(private firestore: Firestore) {
    this.chunkCollection = collection(this.firestore, &#x27;chunks&#x27;);
  }
</code></pre><p class="">
</p><p class="">For my C# buddies out there, here&#x27;s how Angular&#x27;s dependency injection scopes compare:</p><p class=""><mark class="highlight-gray">(Relying on My Past Experience, but Unsure if It Can Be Analogized in Different Situations)</mark></p><p class=""><a href="https://v17.angular.io/api/core/Injectable#providedIn">https://v17.angular.io/api/core/Injectable#providedIn</a></p><table class="simple-table"><tbody><tr><td class="">Feature</td><td class="">C# Equivalent</td><td class="" style="width:309.99478912353516px">Description</td></tr><tr><td class="">&lt;empty&gt;</td><td class="">Scoped</td><td class="" style="width:309.99478912353516px">manually register to your providers</td></tr><tr><td class=""><code>any</code>(deprecated)</td><td class="">Transient</td><td class="" style="width:309.99478912353516px">New instance every time</td></tr><tr><td class="">OtherModule (deprecated)</td><td class="">Scoped</td><td class="" style="width:309.99478912353516px">Shared the same instance</td></tr><tr><td class=""><code>root</code></td><td class="">Singleton</td><td class="" style="width:309.99478912353516px">One instance for the whole app</td></tr><tr><td class=""><code>platform</code></td><td class="">-</td><td class="" style="width:309.99478912353516px">Shared across multiple apps</td></tr></tbody></table><p class="">
</p><h3 class="">The Dependency Chain: How It All Connects</h3><p class=""><strong>Scenario 1: Everything&#x27;s Registered Properly</strong></p><p class="">Imagine this: your component relies on a service, and that service needs Firestore.</p><p class="">If you&#x27;ve set things up right in <code>app.config.ts</code>, it&#x27;s smooth sailing. Your component can use everything without breaking a sweat.</p><p class="">Here&#x27;s what it looks like in <code>app.config.ts</code>:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-JavaScript">export const appConfig: ApplicationConfig = {

providers: [provideFirestore(() =&gt; getFirestore())]</code></pre><p class="">But heads up! If you forget to register stuff in <code>app.config.ts</code>, things will go south real quick.</p><p class="">
</p><p class=""><strong>Scenario 2: Going Ruthless - Direct Firestore Action</strong></p><p class="">Now, what if your component wants to chat with Firestore directly? No middleman service, no relying on <code>app.config.ts</code>? </p><p class="">No problem! You can register services right in your component&#x27;s <code>imports</code>.</p><p class="">Here, we&#x27;re bringing <strong>FirestoreModule</strong> into the <code>imports</code> array. It&#x27;s like telling Angular, &quot;Hey, I need Firestore for this component, and I&#x27;m handling it myself.&quot; Then, in the constructor, we&#x27;re actually injecting Firestore. It&#x27;s DIY dependency injection at its finest!</p><p class="">This setup gives you more control and keeps your component self-contained. It&#x27;s perfect when you need a specific service but don&#x27;t want to mess up your global configuration.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-JavaScript">@Component({
  selector: &#x27;app-child&#x27;,
  standalone: true,
  imports: [FirestoreModule, CommonModule, FormsModule, MaterialModule],
  templateUrl: &#x27;./child.component.html&#x27;,
  styleUrls: [&#x27;./child.component.sass&#x27;],
  animations: [listAnimation],
})
export class TechComponent implements OnInit {
  constructor(private firestore: Firestore) {}
	// ... 
}
</code></pre><p class="">
</p><h3 class="">Providers vs Imports</h3><ul class="bulleted-list"><li style="list-style-type:disc">Providers are like the planners, telling Angular how to set things up.</li></ul><ul class="bulleted-list"><li style="list-style-type:disc">Imports are the actual guests showing up to the party.</li></ul><p class="">
</p><p class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body>