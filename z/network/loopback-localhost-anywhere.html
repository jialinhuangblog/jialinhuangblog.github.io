<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>loopback(127.0.0.1, ::1), localhost, and 0.0.0.0 in Local Development</title></head><body><article class="page serif"><header><div class="page-header-icon undefined"><img class="icon" src="https://www.notion.so/icons/fire_red.svg"/></div><h1 class="page-title">loopback(127.0.0.1, ::1), localhost, and 0.0.0.0 in Local Development</h1><p class="page-description"></p><table class="properties"><tbody><tr class="property-row property-row-created_by"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesCreatedBy"><path d="M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 10.4229C6.05176 10.4229 4.54785 11.1133 3.83008 11.9131C2.90039 10.9082 2.33301 9.55469 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 9.55469 13.1064 10.9082 12.1699 11.9131C11.4521 11.1133 9.94824 10.4229 8 10.4229ZM8 9.30176C9.32617 9.30859 10.3516 8.18066 10.3516 6.71094C10.3516 5.33008 9.31934 4.18164 8 4.18164C6.6875 4.18164 5.6416 5.33008 5.64844 6.71094C5.65527 8.18066 6.68066 9.28809 8 9.30176Z"></path></svg></span>Created by</th><td><span class="user"><img src="loopback(127%200%200%201,%201),%20localhost,%20and%200%200%200%200%20in%20%20bc241fa6fa434c159f42c71cc443e568/IMG_2295.jpg" class="icon user-icon"/>JiaLin Huang</span></td></tr><tr class="property-row property-row-last_edited_time"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesCreatedAt"><path d="M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.6738 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM4.54102 8.91211H7.99316C8.30078 8.91211 8.54004 8.67285 8.54004 8.37207V3.8877C8.54004 3.58691 8.30078 3.34766 7.99316 3.34766C7.69238 3.34766 7.45312 3.58691 7.45312 3.8877V7.83203H4.54102C4.2334 7.83203 4.00098 8.06445 4.00098 8.37207C4.00098 8.67285 4.2334 8.91211 4.54102 8.91211Z"></path></svg></span>Last edited</th><td><time>@2024年9月25日 22:55</time></td></tr><tr class="property-row property-row-multi_select"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>Tags</th><td><span class="selected-value select-value-color-purple">Post</span></td></tr></tbody></table></header><div class="page-body"><h1 class=""><strong>Why I Wrote This</strong></h1><p class="">I found an issue where my backend server was listening on <code>127.0.0.1:1234</code>, but I couldn&#x27;t access to it using <code>localhost:1234</code> in my browser or <code>curl</code>. Initially I thought it’s a backend issue, I found no errors in the logs. This led me to check <mark class="highlight-red"><span style="border-bottom:0.05em solid">whether 127.0.0.1 and localhost were truly equivalent.</span></mark><br/><br/></p><p class=""><strong>Short answer: </strong>In NodeJs 17, localhost is primarily resolved to an IPv6 address. My backend was only listening on IPv4, causing client requests to fail without ever reaching the server.</p><p class="">
</p><p class=""><strong>In This Article</strong></p><p class="">We will cover the following topics:</p><ul class="bulleted-list"><li style="list-style-type:disc"><strong>Loopback</strong>: Understanding how the loopback interface works.</li></ul><ul class="bulleted-list"><li style="list-style-type:disc"><strong>IPv4 Range</strong>: A brief overview of the IPv4 address range and its significance.</li></ul><ul class="bulleted-list"><li style="list-style-type:disc"><strong>IPv6 fe80</strong>: An introduction to link-local addresses in IPv6.</li></ul><ul class="bulleted-list"><li style="list-style-type:disc"><strong>0.0.0.0 and localhost</strong>: Clarifying the meanings and uses of these addresses.</li></ul><p class="">
</p><p class="">
</p><p class="">
</p><h1 class="">Loopback</h1><p class="">Loopback is a virtual interface without physical meaning.</p><p class=""><mark class="highlight-yellow_background">You can think of it as a virtual door, like Doraemon&#x27;s Anywhere Door, but this door </mark><mark class="highlight-yellow_background"><strong>only leads to your own machine when opened</strong></mark><mark class="highlight-yellow_background">. In other words, it&#x27;s an Anywhere Door that only works within your own computer.</mark></p><p class="">Common loopback addresses:</p><table class="simple-table"><tbody><tr><td class="">address</td><td class="" style="width:423.99715423583984px">format</td></tr><tr><td class="">127.0.0.1</td><td class="" style="width:423.99715423583984px">IPv4</td></tr><tr><td class="">::1</td><td class="" style="width:423.99715423583984px">IPv6 (=0000:0000:0000:0000:0000:0000:0000:0001)</td></tr></tbody></table><h3 class="">IPv4 Loopback Range</h3><p class="">IPv4 sets aside a whole bunch of addresses from <code>127.0.0.0</code> to <code>127.255.255.255</code> for loopback. It&#x27;s like having a ton of virtual doors all leading back to your own computer.</p><p class="">This comes in handy when you want to test multiple programs on one machine.</p><p class="">For example, you could have:</p><ol type="1" class="numbered-list" start="1"><li>Server A using 127.0.0.4</li></ol><ol type="1" class="numbered-list" start="2"><li>Server B using 127.0.5.4</li></ol><ol type="1" class="numbered-list" start="3"><li>And so on...</li></ol><h3 class="">IPv6 has only Loopback <code>::1</code>, no Loopback Range</h3><p class="">Back on the design decisions of IPv4, it’s clear that IPv6 has learned from those lessons by avoiding the need for a reserved range like 127.0.0.0/8. With the vast address space available in IPv6, there’s no need for such concerns. </p><p class="">In the past, IPv4 users had to be careful about setting up private addresses, and forgetting to properly configure a private address as public could lead to security risks. </p><p class="">IPv6 provides ample space, allowing for more straightforward and safer address allocation.</p><p class="">
</p><h3 class="">IPv6 has something called link-local addresses (<code>fe80::/10</code>). <br/>These kind of make up for not having a loopback range.<br/></h3><p class=""><strong>Why: it is better than IPv4?</strong></p><p class="">Using the fe80::/10 link-local addresses allows devices to operate flexibly across multiple interfaces while <strong>avoiding the potential issues of address configuration found in IPv4</strong>. This results in greater efficiency and convenience.</p><p class=""><mark class="highlight-red"><strong>The IPv6 standard</strong></mark>: says addresses from fe80::/10 to febf::/10 let devices on the same network talk to each other without needing routers or DHCP. It&#x27;s pretty neat!</p><p class="">Here&#x27;s a quick breakdown of how it works:</p><ol type="1" class="numbered-list" start="1"><li>fe80 to febf (ignore the rest)</li></ol><ol type="1" class="numbered-list" start="2"><li>In numbers, that&#x27;s <code>fe 8 0</code> to <code>fe 11 16</code></li></ol><ol type="1" class="numbered-list" start="3"><li>In binary: <code>fe 1000 0000</code> to <code>fe 1011 1111</code></li></ol><ol type="1" class="numbered-list" start="4"><li>After the first 10 bits, you&#x27;ve got 2^118 possible addresses!</li></ol><p class=""><mark class="highlight-red"><mark class="highlight-default_background"><strong>BUT In practice</strong></mark></mark>: we only use <code>fe80::/64</code> for link-local stuff. The rest is saved for later. IPv6 devices automatically give themselves a link-local address. With so many possible addresses (about 18 quintillion!), the chances of two devices picking the same address are basically zero.</p><p class="">
</p><p class="">Also, these link-local addresses in IPv6 are different from private network addresses in IPv4 (like 10.x.x.x or 192.168.x.x). They serve different purposes, even if they might seem similar at first glance. <mark class="highlight-red"><strong>Link-local addresses in IPv6 DO NOT NEED INTERNET.</strong></mark></p><p class="">
</p><h3 class="">fe80: The Helper You&#x27;re Already Using</h3><ol type="1" class="numbered-list" start="1"><li>Routers chat using <mark class="highlight-red"><strong>NDP</strong></mark> (Neighbor Discovery Protocol) for IPv6<ul class="bulleted-list"><li style="list-style-type:disc">For IPv4, they use <mark class="highlight-red"><strong>ARP</strong></mark> to match IP and MAC addresses</li></ul><ul class="bulleted-list"><li style="list-style-type:disc">IPv6 is huge, so NAT isn&#x27;t usually needed (but NAT66 exists for transition)</li></ul></li></ol><ol type="1" class="numbered-list" start="2"><li>Newbies use a <strong>fe80 (link-local)</strong> address to introduce themselves to the router and get information about the network<p class=""><strong>When the New Kid Joins the Network Classroom</strong></p><ol type="1" class="numbered-list" start="1"><li>no name tag (IP) yet.</li></ol><ol type="1" class="numbered-list" start="2"><li>It makes up a <code>fe80</code> nickname to introduce itself. Kinda like &quot;Hey router&quot;</li></ol><ol type="1" class="numbered-list" start="3"><li>IPv6 trick called <mark class="highlight-red">SLAAC</mark>. It uses that <code>fe80</code> nickname to set things up.</li></ol><ol type="1" class="numbered-list" start="4"><li>If it needs more info, <mark class="highlight-red">DHCP</mark>&#x27;s got its back - like getting the class schedule and cafeteria menu.</li></ol></li></ol><p class="">
</p><h3 class="">Three MUSTs for communication within <code>fe80::/10</code></h3><ol type="1" class="numbered-list" start="1"><li>Same subnet</li></ol><ol type="1" class="numbered-list" start="2"><li>Same medium (like the same WiFi access point)</li></ol><ol type="1" class="numbered-list" start="3"><li>Same protocol (WiFi and Ethernet are completely different)</li></ol><p class=""><mark class="highlight-red">From the OSI perspective, they ONLY works in the physical layer and the data link layer.</mark></p><p class="">
</p><h3 class="">Hey, all network cards on the same computer start with <code>fe80</code>, so they can talk to each other freely, right?</h3><p class="">using <code>ifconfig</code>, you can see so many interface and their ipv6 addresses started with <code>fe80::/10</code>.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-Plain Text">ifconfig</code></pre><p class="">No! Even if these three conditions are met, communication can still be limited due to <strong>virtual network interfaces</strong> on the same computer.</p><p class="">
</p><p class=""><strong>Example: Vrtual interfaces (like utun1, utun2, utun3, etc.):<br/><br/></strong>These are virtual network interfaces created dynamically by apps. VPNs are a common example. They create a virtual tunnel on your computer, allowing you to communicate with &quot;restricted remote&quot; locations through this virtual network.</p><p class="">
</p><p class=""><strong>Example: Physical interfaces (like en0, en1, en2, en3, etc.):<br/><br/></strong>These are your actual, physical network interfaces. Usually, en0 is for Ethernet, en1 for WiFi, and the rest for other connections.</p><p class="">But here&#x27;s the catch: even these can&#x27;t freely communicate because they&#x27;re on different physical links - basically, different network environments. </p><p class="">
</p><p class=""><mark class="highlight-blue"><strong>If you want them to talk, you&#x27;ll need to set up a bridge (like bridge0) to connect them.</strong></mark></p><p class="">
</p><p class="">
</p><p class="">
</p><h3 class="">Isn&#x27;t this similar to how <code>192.168.0.[x|y]</code> communicates in local development?</h3><ul class="bulleted-list"><li style="list-style-type:disc">LANs have multiple subnets</li></ul><ul class="bulleted-list"><li style="list-style-type:disc">Subnets have multiple links</li></ul><p class="">The key difference is that subnets <strong>are routed </strong>while <code>fe80::/10</code> only needs the link conditions to be met for communication.</p><p class="">
</p><p class="">Example: When you&#x27;re running a server on your computer connected to WiFi, and you want to access it from your phone on the same WiFi:</p><ol type="1" class="numbered-list" start="1"><li><strong>Method 1: Using 192.168.0.[x|y]</strong><ul class="bulleted-list"><li style="list-style-type:disc">You type 192.168.0.x on your phone</li></ul><ul class="bulleted-list"><li style="list-style-type:disc">The data goes through the router to reach your computer</li></ul></li></ol><ol type="1" class="numbered-list" start="2"><li><strong>Method 2: Using </strong><code><strong>http://[ipv6address%yourNetworkInterface]:3000</strong></code><ul class="bulleted-list"><li style="list-style-type:disc">For example: <code>curl http://[fe80::xxxx:xxxx:xxxx:4c27%en0]:3000</code></li></ul></li></ol><p class=""><mark class="highlight-blue"><strong>Method 2? It doesn&#x27;t go through the router at all! It&#x27;s a direct link between your devices.</strong></mark></p><p class="">
</p><p class="">
</p><h1 class="">0.0.0.0</h1><table class="simple-table"><tbody><tr><td class="">0.0.0.0</td><td class="">IPv4</td></tr><tr><td class="">::</td><td class="">IPv6</td></tr></tbody></table><p class="">Think of 0.0.0.0 as a wildcard or placeholder. It can represent any address, but no single address can fully represent it. </p><p class="">It&#x27;s kind of deep when you think about it - like a divine IP address saying, &quot;<mark class="highlight-orange_background"><strong>I represent everything, but nothing specific can represent me</strong></mark>.&quot; </p><p class="">Pretty philosophical for a bunch of zeros, right?</p><p class="">Let&#x27;s break it down from different perspectives:</p><ol type="1" class="numbered-list" start="1"><li><mark class="highlight-red"><strong>Server&#x27;s View</strong></mark>: When a server listens on 0.0.0.0, it&#x27;s basically saying, <p class=""><mark class="highlight-orange_background"><strong>&quot;I&#x27;m all ears on every available network interface.&quot;.</strong></mark></p></li></ol><ol type="1" class="numbered-list" start="2"><li><mark class="highlight-red"><strong>Regular Client&#x27;s View</strong></mark>: As a destination, 0.0.0.0 is a no-go.<p class=""> It&#x27;s like trying to mail a letter to &quot;Anywhere&quot; - it just doesn&#x27;t work. </p><p class="">If you try to <code>ping 0.0.0.0</code>, your computer will look at you and say, &quot;<mark class="highlight-orange_background">I can’t</mark>&quot;</p></li></ol><ol type="1" class="numbered-list" start="3"><li><mark class="highlight-red"><strong>Browser&#x27;s View</strong></mark>: Now, this is where it gets interesting. Remember how <code>pinging 0.0.0.0</code> was useless? Well, browsers are a bit smarter  (or maybe just more <em><strong>humanity</strong></em>). <p class="">Most modern browsers see 0.0.0.0 and think, &quot;<mark class="highlight-orange_background">Oh, you probably mean localhost or 127.0.0.1</mark>.&quot; It&#x27;s like they&#x27;re trying to read your mind. But not all browsers agree on how to handle this:</p><ul class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal_background"><strong>Firefox</strong></mark>: &quot;I&#x27;ll let you access it, but I&#x27;m going to warn you something.&quot;</li></ul><ul class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal_background"><strong>Chrome</strong></mark>: &quot;Sure, go right ahead. I don’t care&quot;</li></ul><ul class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-teal_background"><strong>Safari</strong></mark>: &quot;Nope, not happening. Don&#x27;t even try.&quot;</li></ul><table class="simple-table"><tbody><tr><td class="" style="width:95.99857330322266px">browser</td><td class="">backend server</td><td class="" style="width:137.99288940429688px">frontend fetch(…)</td><td class="" style="width:410.99998474121094px">result</td></tr><tr><td class="" style="width:95.99857330322266px">chrome<br/>128.0.6613.139<br/></td><td class="">0.0.0.0</td><td class="" style="width:137.99288940429688px">0.0.0.0</td><td class="" style="width:410.99998474121094px">🟢 200 OK</td></tr><tr><td class="" style="width:95.99857330322266px">safari17.4</td><td class="">0.0.0.0</td><td class="" style="width:137.99288940429688px">0.0.0.0</td><td class="" style="width:410.99998474121094px">❌ failed to load resource: bad url (no response)</td></tr><tr><td class="" style="width:95.99857330322266px">firefox 130</td><td class="">0.0.0.0</td><td class="" style="width:137.99288940429688px">0.0.0.0</td><td class="" style="width:410.99998474121094px">🔺said “not secure”, but still get 200</td></tr></tbody></table></li></ol><p class=""><mark class="highlight-teal_background"><strong>Firefox special behavior</strong></mark></p><p class="">Firefox warns you it&#x27;s not secure, probably because it&#x27;s not HTTPS. But wait a minute - local development often uses HTTP, and that&#x27;s normal, right? And Firefox doesn&#x27;t warn you when accessing localhost, even though that&#x27;s HTTP too. What gives?</p><table class="simple-table"><tbody><tr><td class="">backend server</td><td class="">frontend fetch(…)</td><td class=""></td></tr><tr><td class="">0.0.0.0</td><td class="">localhost</td><td class="">secure</td></tr><tr><td class="">0.0.0.0</td><td class="">0.0.0.0</td><td class=""><mark class="highlight-red">not secure</mark></td></tr></tbody></table><p class="">The likely reason:<br/><br/><mark class="highlight-orange_background">Localhost</mark> is special. It&#x27;s designed from the get-go to be <mark class="highlight-orange_background">a trusted domain on your machine</mark>.</p><p class="">… But when you use an IP address like 0.0.0.0, the browser isn&#x27;t sure if you&#x27;re staying local or venturing out into the wild internet. So it <mark class="highlight-orange_background">plays it safe and gives you a heads up</mark>.</p><p class="">
</p><p class="">
</p><h1 class="">localhost</h1><p class="">localhost is a special hostname, but it&#x27;s not a shortcut. When a browser receives &quot;localhost&quot;, it still goes through DNS resolution. It doesn&#x27;t think, &quot;Oh, it&#x27;s the local machine, I&#x27;ll just send it to 127.0.0.1 without DNS resolution.”</p><p class="">DNS resolution behavior needs to <mark class="highlight-red"><strong>stay consistent</strong></mark>. Plus, you might point localhost to a different address, like 127.0.1.4.</p><p class="">Example 1: You might point localhost to a different address, like <code>127.0.1.4</code>.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-Plain Text"># cat /etc/hosts

127.0.0.1	localhost
255.255.255.255	broadcasthost
::1             localhost
# this will go to 127.0.1.4 not 127.0.0.1
# 127.0.0.1 is overwritten.
127.0.1.4             localhost</code></pre><p class="">
</p><p class="">If you add <code>127.0.0.1 aapple.com</code> to your hosts file, both <code>aapple.com</code> and <code>localhost</code> will go to <code>127.0.0.1</code>.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-Plain Text"># cat /etc/hosts

127.0.0.1	localhost
255.255.255.255	broadcasthost
::1             localhost
127.0.0.1  aapple.com</code></pre><p class="">
</p><p class="">
</p><p class="">
</p><p class="">
</p><p class="">
</p><h1 class="">Back to Issue Testing</h1><p class="">
</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre class="code"><code class="language-Plain Text">$ cat /etc/hosts

##
127.0.0.1	localhost
255.255.255.255	broadcasthost
::1             localhost</code></pre><h3 class="">If a <code>Node.js 17 frontend</code> tries to access a normal backend:</h3><table class="simple-table"><tbody><tr><td class=""><strong>Backend host</strong></td><td class=""><strong>Frontend access to</strong></td><td class="" style="width:61.99999237060547px"><strong>Result</strong></td></tr><tr><td class="">localhost</td><td class="">127.0.0.1</td><td class="" style="width:61.99999237060547px">🟢</td></tr><tr><td class="">localhost</td><td class="">localhost</td><td class="" style="width:61.99999237060547px">🟢</td></tr><tr><td class="">localhost</td><td class="">0.0.0.0</td><td class="" style="width:61.99999237060547px">🟢</td></tr><tr><td class="">0.0.0.0</td><td class="">127.0.0.1</td><td class="" style="width:61.99999237060547px">🟢</td></tr><tr><td class="block-color-red_background">0.0.0.0</td><td class="block-color-red_background">localhost</td><td class="block-color-red_background" style="width:61.99999237060547px">❌</td></tr><tr><td class="">0.0.0.0</td><td class="">0.0.0.0</td><td class="" style="width:61.99999237060547px">🟢</td></tr><tr><td class="">127.0.0.1</td><td class="">127.0.0.1</td><td class="" style="width:61.99999237060547px">🟢</td></tr><tr><td class="block-color-red_background">127.0.0.1</td><td class="block-color-red_background">localhost</td><td class="block-color-red_background" style="width:61.99999237060547px">❌</td></tr><tr><td class="">127.0.0.1</td><td class="">0.0.0.0</td><td class="" style="width:61.99999237060547px">🟢</td></tr></tbody></table><p class="">The issue occurring in Node.js 17 version seems to be that if /etc/hosts is set with &quot;::1 localhost&quot;, it will resolve your localhost to IPv6. If your backend is listening on an IPv4 address, the client side won&#x27;t connect at all, and there won&#x27;t even be an error log.</p><figure><div class="source">https://github.com/chimurai/http-proxy-middleware/issues/705</div></figure><figure><div class="source">https://github.com/nodejs/node/issues/40537</div></figure><h3 class="">Let&#x27;s look at it the other way? Start a <code>Node.js 17 backend</code> with a normal Node.js frontend:</h3><table class="simple-table"><tbody><tr><td class="" style="width:170.99999237060547px"><strong>Backend host</strong></td><td class="" style="width:168.34090423583984px"><strong>Firefox access to</strong></td><td class="" style="width:170.99288940429688px"><strong>Result</strong></td><td class="" style="width:78.99005126953125px">using curl</td></tr><tr><td class="block-color-red_background" style="width:170.99999237060547px">localhost</td><td class="block-color-red_background" style="width:168.34090423583984px">127.0.0.1</td><td class="block-color-red_background" style="width:170.99288940429688px">❌</td><td class="block-color-red_background" style="width:78.99005126953125px">❌</td></tr><tr><td class="" style="width:170.99999237060547px">localhost</td><td class="" style="width:168.34090423583984px">localhost</td><td class="" style="width:170.99288940429688px">🟢</td><td class="" style="width:78.99005126953125px">🟢</td></tr><tr><td class="block-color-red_background" style="width:170.99999237060547px">localhost</td><td class="block-color-red_background" style="width:168.34090423583984px">0.0.0.0</td><td class="block-color-red_background" style="width:170.99288940429688px">❌</td><td class="block-color-red_background" style="width:78.99005126953125px">❌</td></tr><tr><td class="" style="width:170.99999237060547px">0.0.0.0</td><td class="" style="width:168.34090423583984px">127.0.0.1</td><td class="" style="width:170.99288940429688px">🟢</td><td class="" style="width:78.99005126953125px">🟢</td></tr><tr><td class="block-color-default_background" style="width:170.99999237060547px">0.0.0.0</td><td class="block-color-default_background" style="width:168.34090423583984px">localhost</td><td class="block-color-default_background" style="width:170.99288940429688px">🟢</td><td class="block-color-default_background" style="width:78.99005126953125px">🟢</td></tr><tr><td class="" style="width:170.99999237060547px">0.0.0.0</td><td class="" style="width:168.34090423583984px">0.0.0.0</td><td class="" style="width:170.99288940429688px">🟢 (not secure flag)</td><td class="" style="width:78.99005126953125px">🟢</td></tr><tr><td class="" style="width:170.99999237060547px">127.0.0.1</td><td class="" style="width:168.34090423583984px">127.0.0.1</td><td class="" style="width:170.99288940429688px">🟢</td><td class="" style="width:78.99005126953125px">🟢</td></tr><tr><td class="" style="width:170.99999237060547px">127.0.0.1</td><td class="" style="width:168.34090423583984px">localhost</td><td class="" style="width:170.99288940429688px"><mark class="highlight-default"><mark class="highlight-default_background">🟢</mark></mark></td><td class="" style="width:78.99005126953125px"><mark class="highlight-default_background">🟢</mark></td></tr><tr><td class="" style="width:170.99999237060547px">127.0.0.1</td><td class="" style="width:168.34090423583984px">0.0.0.0</td><td class="" style="width:170.99288940429688px">🟢 (not secure flag)</td><td class="" style="width:78.99005126953125px">🟢</td></tr></tbody></table><p class="">
</p><p class="">Some people suggest not using localhost, but instead using a specific IPv4 address because localhost might behave differently on different systems.</p><blockquote class="">You shouldn&#x27;t be using <code>localhost</code> but <code>127.0.0.1</code> instead. Reason is that name resolution for localhost varies a lot <mark class="highlight-yellow_background"><strong>between different systems and implementations of their network stacks.</strong></mark></blockquote><p class="">This is reasonable, although in most development scenarios we don&#x27;t encounter such extreme system differences.</p><p class="">
</p><p class="">
</p><p class="">
</p><p class="">
</p><p class="">
</p><h1 class="">Resources</h1><p class=""><a href="https://stackoverflow.com/questions/45299648/how-to-access-devices-with-ipv6-link-local-address-from-browserlike-ie-firefox">https://stackoverflow.com/questions/45299648/how-to-access-devices-with-ipv6-link-local-address-from-browserlike-ie-firefox</a></p><p class=""><a href="https://thiscute.world/posts/linux-virtual-network-interfaces/">https://thiscute.world/posts/linux-virtual-network-interfaces/</a></p><p class="">
</p><p class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body>